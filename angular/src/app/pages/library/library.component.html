<div class="main-section">
  <div
    class="header h-15 flex items-center justify-between px-4 border-b border-base-300"
  >
    <div class="text-4xl">Library</div>
    <div>
      <button
        [disabled]="!(this._libraryService.hasCurrentDirectory$ | async)"
        class="btn"
        (click)="this._libraryService.refreshGamesFiles()"
      >
        <i-lucide name="refresh-cw" size="18"></i-lucide>Refresh
      </button>
      @if(this._libraryService.hasCurrentDirectory$ | async) {
      <div class="dropdown dropdown-end">
        <div tabindex="0" role="button" class="btn m-1">
          <i-lucide name="ellipsis"></i-lucide>
        </div>
        <ul
          tabindex="-1"
          class="dropdown-content menu bg-base-100 rounded-box z-1 w-52 p-2 shadow-sm"
        >
          <li>
            <a (click)="this._libraryService.downloadAllArt()"
              ><i-lucide name="download" [size]="16"></i-lucide>Download Artwork
              for All Games</a
            >
          </li>
        </ul>
      </div>
      }
    </div>
  </div>
  <div
    class="body p-4 overflow-y-scroll grid grid-cols-[repeat(auto-fill,minmax(480px,1fr))] gap-x-4 gap-y-5"
    style="
      height: calc(100vh - 64px - 60px - 32px);
      grid-auto-rows: minmax(auto, 200px);
    "
  >
    @for (item of this._libraryService.library$ | async; track item) {
    <app-gamecard [game]="item" class="h-full max-h-[200px]"></app-gamecard>
    }
  </div>
</div>
